{% extends 'base.html.twig' %}

{% block title %}Mes rendez-vous{% endblock %}

{% block body %}
    {% if app.user %}
        <a href="{{ path('app_logout') }}" class="underline p-3 float-end">Déconnexion</a>
    {% endif %}

    <div class="container">
        <div class="text-center mb-8">

            <div class="avatar">
                <div class="mask mask-hexagon w-36">
                    <img src="{{ asset(app.user.avatar) }}"/>
                </div>
            </div>

            <h1 class="font-bold text-3xl">
                Bonjour {{ app.user.firstName }} {{ app.user.lastName }} !
            </h1>
        </div>


        <h2 class="text-2xl">
            Mes Rendez-vous
        </h2>

        <div>
            {% for appointment in appointments %}


                <div class="card bg-base-100 border {{ appointment.is_available ? '' :  'border-primary' }}  card-compact shadow-lg my-3">
                    <div class="card-body">
                        <h2 class="card-title">
                            {{ appointment.datetime|date('H:i') }} le {{ appointment.datetime|date('d/m/Y') }}
                        </h2>

                        {% if appointment.is_available %}
                            <p>
                                Créneau disponible
                            </p>
                        {% else %}
                            <p>
                                Enfant : {{ appointment.student }}
                            </p>
                            <p>
                                Parent(s) : {{ appointment.parents | join(', ') }}
                            </p>
                        {% endif %}


                        <div class="card-actions justify-end">
                            {% if appointment.is_available %}
                                <button class="btn btn-outline btn-sm btn-primary">Supprimer le créneau</button>
                            {% else %}
                                <button class="btn btn-sm btn-primary">Annuler le rdv</button>
                            {% endif %}
                        </div>

                    </div>
                </div>
            {% endfor %}
        </div>

    </div>


{% endblock %}